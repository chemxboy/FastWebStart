/*///////////////////////////////////////////////////////////////////////////////////////////////////////
///// Code mixing by Molokoloco ..... 2010 ......... [EVER IN PROGRESS (it's not done yet)]  ///////////
////  SOURCES here : https://github.com/molokoloco/FastWebStart/                            ///////////
////  My WIKI here : http://code.google.com/p/molokoloco-coding-project/wiki/WikiMenu      /////////// 
////////////////////////////////////////////////////////////////////////////////////////////////// */
(function(a){a.extend(jQuery.easing,{easeInOutCirc:function(c,e,f,n,p){if((e/=p/2)<1)return-n/2*(Math.sqrt(1-e*e)-1)+f;return n/2*(Math.sqrt(1-(e-=2)*e)+1)+f},easeInQuad:function(c,e,f,n,p){return n*(e/=p)*e+f}});a.fn.extend({selectRange:function(c,e){var f=document.getElementById(a(this).attr("id"));if(f)if(f.setSelectionRange){f.focus();f.setSelectionRange(c,e)}else if(f.createTextRange){f=f.createTextRange();f.collapse(true);f.moveEnd("character",e);f.moveStart("character",c);f.select()}else if(f.selectionStart){f.selectionStart=
c;f.selectionEnd=e}},center:function(){return this.each(function(){var c=(a(window).height()-a(this).outerHeight())/2,e=(a(window).width()-a(this).outerWidth())/2;a(this).css({position:"absolute",margin:0,top:(c>20?c:20)+"px",left:(e>0?e:0)+"px"})})},styleSwitch:function(c){var e=false,f=[];a("link[@rel*=style][id]").each(function(){if(c==a(this).attr("href")){a(this).removeAttr("disabled");e=true}else f.push(this)});e==false&&a("head").append('<link rel="stylesheet" type="text/css" href="'+c+'" id="theme'+
Math.random()+'"/>');setTimeout(function(){a(f).each(function(){a(this).attr("disabled","disabled")})},900);a.cookie&&a.cookie("css",c,{expires:365,path:"/"})},styleInit:function(){if(a.cookie&&a.cookie("css")){var c=false;a("link[rel*=style][id]").each(function(){if(a.cookie("css")==a(this).attr("href"))c=true});c==false&&a.fn.styleSwitch(a.cookie("css"))}return a(this).click(function(e){e.preventDefault();a.fn.styleSwitch(a(this).attr("rel"));a(this).blur()})}})})(jQuery);
var db=function(){"console"in window&&console.log.call(console,arguments)},trim=function(a){return a.replace(/^\s+|\s+$/g,"")},escapeURI=function(a){return encodeURIComponent?encodeURIComponent(a):encodeURI?encodeURI(a):escape?escape(a):a},event2key={"97":"a","98":"b","99":"c","100":"d","101":"e","102":"f","103":"g","104":"h","105":"i","106":"j","107":"k","108":"l","109":"m","110":"n","111":"o","112":"p","113":"q","114":"r","115":"s","116":"t","117":"u","118":"v","119":"w","120":"x","121":"y","122":"z"},
pad=function(a){return a<10?"0"+a:a},addslashes=function(a){return(a+"").replace(/\'/g,"\\'").replace(/"/g,"&quot;").replace(/\u0000/g,"\\0")},input2html=function(a){return unescape(a+"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},_vars={},getUrlVars=function(){if(_vars.length>0)return _vars;window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,e){_vars[c]=e});return _vars},objSortByTitle=function(a,c){var e=a.title.toLowerCase(),f=c.title.toLowerCase();return e<
f?-1:e>f?1:0},loadJs=function(a){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(c)},loadCss=function(a){$("head").append('<link rel="stylesheet" type="text/css" href="'+a+'"/>')},getScript=function(a,c){$.ajax({dataType:"script",async:false,cache:true,url:a,success:function(){c&&typeof c=="function"&&c()}})},$H={};
$H.WWW=/localhost\//.test(document.location)?"http://localhost/www.b2bweb.fr/home/":"http://home.b2bweb.fr/";
(function(a,c){var e=800,f=600,n=800,p=600,o=true,u=true,v=true,t=false,w=false,D=null,x=0,y=0,q=0,z=0,E=0,r=0,A="input",F=false,g=a("input#q"),m=a("a.l"),l=a("div#foxy"),B=function(){if(a.cookie("toStock")!="no"){var b=null,d="";if(b=a.cookie("search")){b=b.split("##");a.each(b,function(h,i){if(i){var k=input2html(i),j=addslashes(k);d+='<span id="term_'+h+'"><a href="javascript:void(0)" onclick="$(\'input#q\').val(\''+j+'\').focus();" class="lien2" title="Ajouter &agrave; la recherche">'+k+'</a><a href="javascript:void(0)" onclick="$H.removeStock(\''+
i+"', '"+h+'\');" title="Effacer">&#10006;</a>, </span>'}})}d!=""&&a("div#searhTerms").html(d.substr(0,d.length-9))}},G=function(b){if(!(!b||a.cookie("toStock")=="no")){b=escape(b);var d=null,h=false;if(d=a.cookie("search")){d=d.split("##");a.each(d,function(i,k){if(k==b)h=true})}h||a.cookie("search",d?b+"##"+a.cookie("search"):b,{expires:365,path:"/"});B()}};c.removeStock=function(b,d){var h=null;if(h=a.cookie("search")){h=h.split("##");var i=[];a.each(h,function(k,j){j&&j!=b&&i.push(j)});a.cookie("search",
i.join("##"),{expires:365,path:"/"})}a("span#term_"+d).remove()};var H=function(b){if(a.browser.msie)a("span#editmode").html(" D&eacute;sol&eacute;, <strong>Internet Explorer</strong> n'est pas support&eacute; :-( ! | ");else b?a("span#editmode").html('<a href="javascript:void(0);" onclick="$H.editSites();" title="Editer les liens de cette page (Connexion avec Facebook, pour sauvegarder)">Editer</a> | '):a("span#editmode").html('<a href="javascript:void(0);" onclick="$E.quitEditMode();" title="Effacer les modifications sans enregistrer">Quitter mode &eacute;dition</a> | ')};
c.toggleStock=function(){if(u=a.cookie("toStock")=="no"?true:false){B();a("div#searhTerms").show()}else{a.cookie("search","",{expires:365,path:"/"});a("div#searhTerms").hide()}a.cookie("toStock",u?"yes":"no",{expires:365,path:"/"});a("a#toggleStock").html(u?"Effacer":"Sauver")};c.toggleFoxy=function(){if(o=!o){l.show();a(document).trigger("mousemove")}else l.hide();a.cookie("foxy",o?"yes":"no",{expires:365,path:"/"});a("a#toggleStock").html(o?"Masquer":"Afficher")};var I=function(){var b=document.location.hash||
"home";a("div#menu a").removeClass("bold");a("div#menu a#"+b).addClass("bold")},S=function(b){b=b||5E3;a("<div />").attr({id:"overlay"}).css({top:0,left:0,width:n+"px",height:p+"px"}).appendTo("body").delay(b).fadeOut(400,function(){a(this).remove()})},T=function(){var b=new Date;a("span#heure").html(pad(b.getHours())+":"+pad(b.getMinutes())+":"+pad(b.getSeconds()))},J=function(){g.toggleClass("classQfocus",true)},K=function(){g.focus()},L=function(){g.toggleClass("classQfocus",false)},M=function(){g.val()==
""&&g.blur()},N=function(){A="page";r=0;a(this).blur();if(g.val()!=""&&a(this).attr("rel")&&a(this).attr("rel").indexOf("{R}")!=-1){var b=g.val();G(b);b=escapeURI(b);return!window.open(a(this).attr("rel").replace(/{R}/g,b))}},O=function(){if(!F){F=true;g.autocomplete({suggestUrl:c.WWW+"_google_suggest.php",seedsUrl:c.WWW+"_veryrelated.php",minChars:1,delimiter:/(,|\+|-|AND)\s*/,autoSubmit:false,maxHeight:600,deferRequestBy:0})}A="input";if(g.val()==""&&t)t=false;if(!t)if(g.val()!=""){t=true;m.each(function(){a(this).attr("rel")||
a(this).fadeTo("slow",0.2)})}else m.each(function(){a(this).attr("rel")||a(this).fadeTo("slow",1)})},P=function(b){var d=b.which||b.keyCode;if(A=="input")if(g.val().length>=1&&r==0){r=1;m.each(function(){a(this).attr("class","l")})}else if(g.val().length<1&&r==1)r=0;r==0&&m.each(function(){event2key[d]!=""&&a(this).text().charAt(0).toLowerCase()==event2key[d]?a(this).attr("class","l hightlight"):a(this).attr("class","l")});if(d==27){a("div#info,div#prefs").hide();a("div#divEdit").is(":visible")&&
a("div#divEdit").dialog("close")}},U=function(b){!a(b.target).is("a#preferences")&&!a(this).parents().is("div#prefs")&&a("div#prefs").hide();!a(b.target).is("a#aide")&&!a(this).parents().is("div#info")&&a("div#info").hide()},V=function(){var b=getUrlVars().searcher;if(b&&/(home\.b2bweb\.fr)/.test(b))window.document.location.href="http://fr.wiktionary.org/wiki/".escape(getUrlVars().q);a("select#searcher")[0].selectedIndex=0;g.attr({autocomplete:"off"});a("form#f").bind("submit",function(){var d=g.val();
G(d)})},Q=function(){a("form#f").attr("action","http://www.google.fr/search");var b=a("input#searcher option:selected").val();if(b=="")g.val("");else{if(b.indexOf("|")>=0){b=b.split("|");a("form#f").attr("action",b[0]);b=b[1]}if(!w&&g.val()!=""&&(b=="{mot}"||b=="{tag}")){g.selectRange(0,g.val().length+1);w=false}else{g.val(b);g.selectRange(b.indexOf("{"),b.indexOf("}")+1);w=true}}},W=function(b){if(v){v=false;g.focus();if(o=="1")l.animate({top:0,left:b.pageX-120,opacity:1},1E3,function(){D=setInterval(function(){x+=
0.06;z=0.4+Math.abs(Math.cos(x)*0.6);E=-y+Math.abs(Math.cos(x)*y);l.css({top:E+"px",opacity:z});a("div#footerBg").css({opacity:z});if(q>=222){clearInterval(D);l.stop(true,true);l.animate({top:"-"+l.height()+"px",opacity:0},function(){v=true;q=0});a("div#footerBg").css({opacity:0.8})}else if(q%parseInt(Math.random()*20)==0)y=Math.abs(Math.cos(q/100))*10;q++},50)});else{l.hide();l.css({top:0})}}else if(o&&!l.is(":animated")){b=(b.pageX||360)-120;var d=a(window).width()/2-120;if(b<d){b+=d;if(b>a(window).width()-
250)b=a(window).width()-240}else{b-=d;if(b<0)b=0}l.animate({left:b},{duration:1400,easing:"easeInQuad"});q=0}};c.setUlCol=function(b){var d=a("#SearchBot").width(),h=SITES.length,i=Math.floor(h/2),k=Math.floor(d/i);d=Math.floor(d/(h-i));a("ul#L1 ul.sortUlLink").css({width:k+"px"});a("ul#L1 ul.sortUlLink li").css({width:k+"px"});a("ul#L2 ul.sortUlLink").css({width:d+"px"});a("ul#L2 ul.sortUlLink li").css({width:d+"px"});var j=a("ul#L1").height();a("ul#L1 li ul.sortUlLink").each(function(){if(b){var C=
j-a(this).height();a(this).find("li:first").css({margin:C+"px 0 0 0"})}else a(this).find("li:first").css({margin:"0"})})};c.posItem=function(){f=a(window).height();e=a(window).width();var b=a("div#SearchBot").height(),d=a("div#SearchBot").width();a("body").css({overflow:f<b||e<d?"auto":"hidden"});a("div#SearchBot").center();a("div#prefs").center();a("div#info").center()};c.editSites=function(b){b&&b.preventDefault();H(false);m.unbind("click",N).unbind("mouseenter",M);g.unbind("keyup",O).unbind("mouseenter",
K).unbind("focus",J).unbind("blur",L);a("select#searcher").unbind("change",Q);a(document).unbind("keypress",P);if(typeof $E)$E.startEditMode();else{loadCss(c.WWW+"css/start/jquery-ui-1.8.custom.css");getScript(c.WWW+"js/jquery-ui-1.8.sortableDialog.min.js");getScript(c.WWW+"js/jquery.edit.min.js",function(){$E.startEditMode()})}return false};c.setDatas=function(b){var d="js/sitesDatas.js.php";switch(b){case "code":d="js/sitesDatas-code.js";break;case "twitter":d="js/sitesDatas-twitter.js"}getScript(c.WWW+
d,function(){R();c.initSites()});document.location.hash=b||"";I();return false};var R=function(){var b=SITES.length,d=Math.floor(b/2),h="",i="",k="",j;for(j in SITES){h='<li class="sortLinkCat"><h3>'+SITES[j].title+"</h3></li>";k="";for(var C in SITES[j].data){var s=SITES[j].data[C];if(s.href&&s.title)k+='<li class="sortLink"><a href="'+s.href+'" rel="'+(s.result||"")+'" title="'+(s.tips||"")+'" class="l">'+s.title+"</a></li>"}i+=parseInt(j)+1<=d?'<li><ul class="sortUlLink">'+k+h+"</ul></li>":'<li><ul class="sortUlLink">'+
h+k+"</ul></li>";if(parseInt(j)+1==d){a("#D1").html('<ul id="L1" class="sortUlCat">'+i+"</ul>");i=""}else parseInt(j)+1==b&&a("#D2").html('<ul id="L2" class="sortUlCat">'+i+"</ul>")}m=a("a.l")};c.initSites=function(){H(true);c.setUlCol(true);c.posItem();m.eq(Math.round(Math.random()*m.length)).addClass("hightlight2");m.live("click",N).live("mouseenter",M);g.bind("keyup",O).bind("mouseenter",K).bind("focus",J).bind("blur",L);a("select#searcher").bind("change",Q);a(document).bind("keypress",P)};a(document).ready(function(){e=
a(window).width();f=a(window).height();n=a(document).width();p=a(document).height();S(700);a("a.css").styleInit();I();V();if(a.cookie("foxy"))o=a.cookie("foxy")=="yes"?true:false;a(document).mousemove(W);a(document).bind("click",U);a(window).bind("resize",c.posItem);switch(document.location.hash){case "#code":c.setDatas("code");break;case "#twitter":c.setDatas("twitter");break;default:R();document.location.hash=="#editmode"?c.editSites():c.initSites()}setInterval(T,1E3);B()})})(jQuery,$H);