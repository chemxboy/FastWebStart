/*///////////////////////////////////////////////////////////////////////////////////////////////////////
///// Code mixing by Molokoloco ..... 2010 ......... [EVER IN PROGRESS (it's not done yet)]  ///////////
////  SOURCES here : https://github.com/molokoloco/FastWebStart/                            ///////////
////  My WIKI here : http://code.google.com/p/molokoloco-coding-project/wiki/WikiMenu      /////////// 
////////////////////////////////////////////////////////////////////////////////////////////////// */
$(function(){$.extend(jQuery.easing,{easeInOutCirc:function(a,c,d,e,f){if((c/=f/2)<1)return-e/2*(Math.sqrt(1-c*c)-1)+d;return e/2*(Math.sqrt(1-(c-=2)*c)+1)+d},easeInQuad:function(a,c,d,e,f){return e*(c/=f)*c+d}});$.fn.extend({selectRange:function(a,c){var d=document.getElementById($(this).attr("id"));if(d)if(d.setSelectionRange)d.focus(),d.setSelectionRange(a,c);else if(d.createTextRange)d=d.createTextRange(),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",a),d.select();else if(d.selectionStart)d.selectionStart=
a,d.selectionEnd=c},center:function(){return this.each(function(){var a=($(window).height()-$(this).outerHeight())/2,c=($(window).width()-$(this).outerWidth())/2;$(this).css({position:"absolute",margin:0,top:(a>20?a:20)+"px",left:(c>0?c:0)+"px"})})},styleSwitch:function(a){var c=!1,d=[];$("link[@rel*=style][id]").each(function(){a==$(this).attr("href")?($(this).removeAttr("disabled"),c=!0):d.push(this)});c===!1&&$("head").append('<link rel="stylesheet" type="text/css" href="'+a+'" id="theme'+Math.random()+
'"/>');setTimeout(function(){$(d).each(function(){$(this).attr("disabled","disabled")})},900);$.cookie&&$.cookie("css",a,cookieOptions)},styleInit:function(){if($.cookie&&$.cookie("css")){var a=!1;$("link[rel*=style][id]").each(function(){$.cookie("css")==$(this).attr("href")&&(a=!0)});a===!1&&$.fn.styleSwitch($.cookie("css"))}return $(this).click(function(a){a.preventDefault();$.fn.styleSwitch($(this).attr("rel"));$(this).blur()})}})});
var db=function(){"console"in window&&console.log.call(console,arguments)},trim=function(a){return a.replace(/^\s+|\s+$/g,"")},escapeURI=function(a){return encodeURIComponent(a)||encodeURI(a)||escape(a)||a},event2key={"97":"a","98":"b","99":"c","100":"d","101":"e","102":"f","103":"g","104":"h","105":"i","106":"j","107":"k","108":"l","109":"m","110":"n","111":"o","112":"p","113":"q","114":"r","115":"s","116":"t","117":"u","118":"v","119":"w","120":"x","121":"y","122":"z"},pad=function(a){return a<
10?"0"+a:a},addslashes=function(a){return(a+"").replace(/\'/g,"\\'").replace(/"/g,"&quot;").replace(/\u0000/g,"\\0")},input2html=function(a){return unescape(a+"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},_vars={},getUrlVars=function(){if(_vars.length>0)return _vars;window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,d){_vars[c]=d});return _vars},objSortByTitle=function(a,c){var d=a.title.toLowerCase(),e=c.title.toLowerCase();return d<e?-1:d>e?1:0},loadJs=function(a){var c=
document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(c)},loadCss=function(a){$("head").append('<link rel="stylesheet" type="text/css" href="'+a+'"/>')},getScript=function(a,c){$.ajax({dataType:"script",async:!1,cache:!0,url:a,success:function(){c&&typeof c=="function"&&c()}})},$H={};$H.WWW=/localhost\//.test(document.location)?"http://localhost/www.b2bweb.fr/home/":"http://home.b2bweb.fr/";
$(function(){var a=null,c=null,d=null,e=null,f={expires:0,path:"/",domain:document.domain},n=800,o=600,y=800,z=600,g=!0,p=!0,A=null,q=0,r=0,i=0,s=0,B=0,t=!0,k=!1,u=!1,v="page",w=!1,C=!1,R=3,x=function(b){if($.cookie("toStock")!="no"){var c=null,d="",m="",e="";(c=$.cookie("search"))&&$.each(c.split("##"),function(b,a){a!=""&&(m=input2html(a),e=addslashes(m),d+='<span id="term_'+b+'"><a href="javascript:void(0)" onclick="$(\'input#q\').val(\''+e+'\').focus();" class="lien2" title="Ajouter &agrave; la recherche">'+
m+'</a><a href="javascript:void(0)" onclick="$H.cookieDeleteTerm(\''+a+"', '"+b+'\');" title="Effacer">&#10006;</a>, </span>')});d!=""&&($("div#searhTerms").html(d.substr(0,d.length-9)),b&&a.val()==""&&(a.val(m).select(),w=!0))}},D=function(b){if(b&&$.cookie("toStock")!="no"){var a=null,d=!1,c=[],e=b.length;b=escape(b);(a=$.cookie("search"))&&$.each(a.split("##"),function(a,l){l==b?d=!0:e+=unescape(l).length;l!=""&&e<250&&c.push(l)});d||(c.push(b),$.cookie("search",c.join("##"),f),x())}};$H.cookieDeleteTerm=
function(b,a){var c=null,d=[];if(c=$.cookie("search"))$.each(c.split("##"),function(a,c){c!=""&&c!=b&&d.push(c)}),$.cookie("search",d.join("##"),f);$("span#term_"+a).remove()};var E=function(){return document.location.hash||$.cookie("hash")||"home"},S=function(b){document.location.hash=b;$.cookie("hash","#"+b,f)},F=function(b){$.browser.msie?$("span#editmode").html(" D&eacute;sol&eacute;, <strong>Internet Explorer</strong> n'est pas support&eacute; :-( ! | "):b?$("span#editmode").html('<a href="javascript:void(0);" onclick="$H.editSites();" title="Editer les liens de cette page (Connexion avec Facebook, pour sauvegarder)">Editer</a> | '):
$("span#editmode").html('<a href="javascript:void(0);" onclick="$E.quitEditMode();" title="Effacer les modifications sans enregistrer">Quitter mode &eacute;dition</a> | ')};$H.toggleCookiesTerms=function(){(t=$.cookie("toStock")=="no"?!0:!1)?(x(),$("div#searhTerms").show()):($.cookie("search","",f),$("div#searhTerms").hide());$.cookie("toStock",t?"yes":"no",f);$("a#toggleCookiesTerms").html(t?"Effacer":"Sauver")};$H.toggleFoxy=function(){(g=!g)?(d.show(),$(document).trigger("mousemove")):d.hide();
$.cookie("foxy",g?"yes":"no",f);$("a#toggleCookiesTerms").html(g?"Masquer":"Afficher")};var G=function(){var b=E();$("div#menu a").removeClass("bold");$("div#menu a#"+b).addClass("bold")},T=function(b){$("<div />").attr({id:"overlay"}).css({top:0,left:0,width:y+"px",height:z+"px"}).appendTo("body").delay(b||5E3).fadeOut(400,function(){$(this).remove()})},U=function(){var b=new Date;$("span#heure").html(pad(b.getHours())+":"+pad(b.getMinutes())+":"+pad(b.getSeconds()))},H=function(){a.toggleClass("classQfocus",
!0);v="input"},I=function(){a.focus()},J=function(){a.toggleClass("classQfocus",!1);v="page"},K=function(){if(a.val()){if(!w){var b=a.val().length;a.selectRange(b,b)}}else a.blur()},L=function(){},M=function(){if(a.val()!=""&&$(this).attr("rel")&&$(this).attr("rel").indexOf("{R}")!=-1){var b=a.val();D(b);b=escapeURI(b);return!window.open($(this).attr("rel").replace(/{R}/g,b))}return!0},N=function(){C||(C=!0,a.autocomplete({suggestUrl:$H.WWW+"_google_suggest.php",seedsUrl:$H.WWW+"_veryrelated.php",
minChars:1,delimiter:/(,|\+|-|AND)\s*/,autoSubmit:!1,maxHeight:600,deferRequestBy:0}));!k&&a.val()!=""?(k=!0,c.each(function(){$(this).attr("rel")==""&&$(this).fadeTo("slow",0.2)})):k&&a.val()==""&&(k=!1,c.each(function(){$(this).attr("rel")==""&&$(this).fadeTo("slow",1)}));w=!1},O=function(b){var d=b.which||b.keyCode;d==27&&($("div#info,div#prefs").hide(),$("div#divEdit").is(":visible")&&$("div#divEdit").dialog("close"));v=="input"&&a.val().length>=1?c.each(function(){$(this).attr("class","l")}):
event2key[d]&&c.each(function(){event2key[d]!=""&&$(this).text().charAt(0).toLowerCase()==event2key[d]?$(this).attr("class","l hightlight"):$(this).attr("class","l")})},V=function(b){!$(b.target).is("a#preferences")&&!$(this).parents().is("div#prefs")&&$("div#prefs").hide();!$(b.target).is("a#aide")&&!$(this).parents().is("div#info")&&$("div#info").hide()},W=function(b){if(p)p=!1,a.focus(),g=="1"?d.animate({top:0,left:b.pageX-120,opacity:1},1E3,function(){A=setInterval(function(){q+=0.06;s=0.4+Math.abs(Math.cos(q)*
0.6);B=-r+Math.abs(Math.cos(q)*r);d.css({top:B+"px",opacity:s});$("div#footerBg").css({opacity:s});i>=222?(clearInterval(A),d.stop(!0,!0),d.animate({top:"-"+d.height()+"px",opacity:0},function(){p=!0;i=0}),$("div#footerBg").css({opacity:0.8})):i%parseInt(Math.random()*20)==0&&(r=Math.abs(Math.cos(i/100))*10);i++},50)}):(d.hide(),d.css({top:0}));else if(g&&!d.is(":animated")){b=(b.pageX||360)-120;var c=$(window).width()/2-120;b<c?(b+=c,b>$(window).width()-250&&(b=$(window).width()-240)):(b-=c,b<0&&
(b=0));d.animate({left:b},{duration:1400,easing:"easeInQuad"});i=0}},Q=function(){c.unbind("click",M).unbind("mouseenter",K).unbind("mouseleave",L);a.unbind("keyup",N).unbind("mouseenter",I).unbind("focus",H).unbind("blur",J);$("select#searcher").unbind("change",P);$(document).unbind("keypress",O);$().keynavReset()},X=function(){var b=getUrlVars().searcher;if(b&&/(home\.b2bweb\.fr)/.test(b))window.document.location.href="http://fr.wiktionary.org/wiki/".escape(getUrlVars().q);$("select#searcher")[0].selectedIndex=
0;a.attr({autocomplete:"off"});$("form#f").bind("submit",function(){D(a.val())})},P=function(){$("form#f").attr("action","http://www.google.fr/search");var b=$("input#searcher option:selected").val();b==""?a.val(""):(b.indexOf("|")>=0&&(b=b.split("|"),$("form#f").attr("action",b[0]),b=b[1]),!u&&a.val()!=""&&(b=="{mot}"||b=="{tag}")?(a.selectRange(0,a.val().length+1),u=!1):(a.val(b),a.selectRange(b.indexOf("{"),b.indexOf("}")+1),u=!0))};$H.setUlColSize=function(b){var a=e.width(),c=SITES.length,d=
Math.floor(c/2),f=Math.floor(a/d);a=Math.floor(a/(c-d));$("ul#L1 ul.sortUlLink,ul#L1 ul.sortUlLink li").css({width:f+"px"});$("ul#L2 ul.sortUlLink,ul#L2 ul.sortUlLink li").css({width:a+"px"});var h=$("ul#L1").height();$("ul#L1 li ul.sortUlLink").each(function(){if(b){var a=h-$(this).height();$(this).find("li:first").css({margin:a+"px 0 0 0"})}else $(this).find("li:first").css({margin:"0"})})};$H.centerElements=function(){o=$(window).height();n=$(window).width();var a=e.height(),c=e.width();$("body").css({overflow:o<
a||n<c?"auto":"hidden"});$("div#SearchBot,div#prefs,div#info").center()};$H.editSites=function(a){a&&a.preventDefault();F(!1);Q();typeof $E=="undefined"?(loadCss($H.WWW+"css/start/jquery-ui-1.8.custom.css"),getScript($H.WWW+"js/jquery-ui-1.8.sortableDialog.min.js"),getScript($H.WWW+"js/jquery.edit.min.js",function(){$E.startEditMode()})):$E.startEditMode();return!1};$H.setDatas=function(a){Q();var c="js/sitesDatas.js.php";switch(a){case "code":c="js/sitesDatas-code.js";break;case "twitter":c="js/sitesDatas-twitter.js";
break;default:a="home"}getScript($H.WWW+c,function(){$H.buildSites();$H.initSites()});S(a);G();return!1};$H.buildSites=function(){var a=SITES.length,d=Math.floor(a/2),e="",f="",g="",h;for(h in SITES){e='<li class="sortLinkCat"><h3>'+SITES[h].title+"</h3></li>";g="";for(var i in SITES[h].data){var j=SITES[h].data[i];j.href&&j.title&&(g+='<li class="sortLink"><a href="'+j.href+'" rel="'+(j.result||"")+'" title="'+(j.tips||"")+'" class="l" tabindex="'+R++ +'">'+j.title+"</a></li>")}f+=parseInt(h)+1<=
d?'<li><ul class="sortUlLink">'+g+e+"</ul></li>":'<li><ul class="sortUlLink">'+e+g+"</ul></li>";parseInt(h)+1==d?($("#D1").html('<ul id="L1" class="sortUlCat">'+f+"</ul>"),f=""):parseInt(h)+1==a&&$("#D2").html('<ul id="L2" class="sortUlCat">'+f+"</ul>")}c=$("a.l")};$H.initSites=function(){F(!0);$H.setUlColSize(!0);$H.centerElements();c.eq(Math.round(Math.random()*c.length)).addClass("hightlight2");c.bind("click",M).bind("mouseenter",K).bind("mouseleave",L);a.bind("keyup",N).bind("mouseenter",I).bind("focus",
H).bind("blur",J);$("select#searcher").bind("change",P);$(document).bind("keypress",O);$("div#SearchBot a.l").keynav()};$(document).ready(function(){n=$(window).width();o=$(window).height();y=$(document).width();z=$(document).height();T(500);a=$("input#q");c=$("a.l");d=$("div#foxy");e=$("div#SearchBot");e.show();$("a.css").styleInit();x(!0);G();X();$.cookie("foxy")&&(g=$.cookie("foxy")=="yes"?!0:!1);var b=E();switch(b){case "#code":$H.setDatas("code");break;case "#twitter":$H.setDatas("twitter");
break;default:$H.buildSites(),b=="#editmode"?$H.editSites():$H.initSites()}$(document).bind("mousemove",W).bind("click",V);$(window).bind("resize",$H.centerElements);setInterval(U,1E3)})});