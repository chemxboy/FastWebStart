/*///////////////////////////////////////////////////////////////////////////////////////////////////////
///// Code mixing by Molokoloco ..... 2010 ......... [EVER IN PROGRESS (it's not done yet)]  ///////////
////  SOURCES here : https://github.com/molokoloco/FastWebStart/                            ///////////
////  My WIKI here : http://code.google.com/p/molokoloco-coding-project/wiki/WikiMenu      /////////// 
////////////////////////////////////////////////////////////////////////////////////////////////// */
(function(a){a.extend(jQuery.easing,{easeInOutCirc:function(c,e,f,n,p){if((e/=p/2)<1)return-n/2*(Math.sqrt(1-e*e)-1)+f;return n/2*(Math.sqrt(1-(e-=2)*e)+1)+f},easeInQuad:function(c,e,f,n,p){return n*(e/=p)*e+f}});a.fn.extend({selectRange:function(c,e){var f=document.getElementById(a(this).attr("id"));if(f)if(f.setSelectionRange){f.focus();f.setSelectionRange(c,e)}else if(f.createTextRange){f=f.createTextRange();f.collapse(true);f.moveEnd("character",e);f.moveStart("character",c);f.select()}else if(f.selectionStart){f.selectionStart= c;f.selectionEnd=e}},center:function(){return this.each(function(){var c=(a(window).height()-a(this).outerHeight())/2,e=(a(window).width()-a(this).outerWidth())/2;a(this).css({position:"absolute",margin:0,top:(c>20?c:20)+"px",left:(e>0?e:0)+"px"})})},styleSwitch:function(c){var e=false,f=[];a("link[@rel*=style][id]").each(function(){if(c==a(this).attr("href")){a(this).removeAttr("disabled");e=true}else f.push(this)});e===false&&a("head").append('<link rel="stylesheet" type="text/css" href="'+c+'" id="theme'+ Math.random()+'"/>');setTimeout(function(){a(f).each(function(){a(this).attr("disabled","disabled")})},900);a.cookie&&a.cookie("css",c,{expires:365,path:"/"})},styleInit:function(){if(a.cookie&&a.cookie("css")){var c=false;a("link[rel*=style][id]").each(function(){if(a.cookie("css")==a(this).attr("href"))c=true});c===false&&a.fn.styleSwitch(a.cookie("css"))}return a(this).click(function(e){e.preventDefault();a.fn.styleSwitch(a(this).attr("rel"));a(this).blur()})}})})(jQuery); var db=function(){"console"in window&&console.log.call(console,arguments)},trim=function(a){return a.replace(/^\s+|\s+$/g,"")},escapeURI=function(a){return encodeURIComponent?encodeURIComponent(a):encodeURI?encodeURI(a):escape?escape(a):a},event2key={"97":"a","98":"b","99":"c","100":"d","101":"e","102":"f","103":"g","104":"h","105":"i","106":"j","107":"k","108":"l","109":"m","110":"n","111":"o","112":"p","113":"q","114":"r","115":"s","116":"t","117":"u","118":"v","119":"w","120":"x","121":"y","122":"z"}, pad=function(a){return a<10?"0"+a:a},addslashes=function(a){return(a+"").replace(/\'/g,"\\'").replace(/"/g,"&quot;").replace(/\u0000/g,"\\0")},input2html=function(a){return unescape(a+"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},_vars={},getUrlVars=function(){if(_vars.length>0)return _vars;window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,e){_vars[c]=e});return _vars},objSortByTitle=function(a,c){var e=a.title.toLowerCase(),f=c.title.toLowerCase();return e< f?-1:e>f?1:0},loadJs=function(a){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(c)},loadCss=function(a){$("head").append('<link rel="stylesheet" type="text/css" href="'+a+'"/>')},getScript=function(a,c){$.ajax({dataType:"script",async:false,cache:true,url:a,success:function(){c&&typeof c=="function"&&c()}})},$H={}; $H.WWW=/localhost\//.test(document.location)?"http://localhost/www.b2bweb.fr/home/":"http://home.b2bweb.fr/";var gtv=gtv||{jq:{}}; (function(a,c){var e=800,f=600,n=800,p=600,o=true,t=true,u=true,s=false,v=false,C=null,w=0,x=0,q=0,y=0,D=0,z="page",E=false,T=3,g=null,m=null,l=null,A=function(){if(a.cookie("toStock")!="no"){var b=null,d="";if(b=a.cookie("search")){b=b.split("##");a.each(b,function(h,i){if(i){var k=input2html(i),j=addslashes(k);d+='<span id="term_'+h+'"><a href="javascript:void(0)" onclick="$(\'input#q\').val(\''+j+'\').focus();" class="lien2" title="Ajouter &agrave; la recherche">'+k+'</a><a href="javascript:void(0)" onclick="$H.removeStock(\''+ i+"', '"+h+'\');" title="Effacer">&#10006;</a>, </span>'}})}d!=""&&a("div#searhTerms").html(d.substr(0,d.length-9))}},F=function(b){if(!(!b||a.cookie("toStock")=="no")){b=escape(b);var d=null,h=false;if(d=a.cookie("search")){d=d.split("##");a.each(d,function(i,k){if(k==b)h=true})}h||a.cookie("search",d?b+"##"+a.cookie("search"):b,{expires:365,path:"/"});A()}};c.removeStock=function(b,d){var h=null;if(h=a.cookie("search")){h=h.split("##");var i=[];a.each(h,function(k,j){j&&j!=b&&i.push(j)});a.cookie("search", i.join("##"),{expires:365,path:"/"})}a("span#term_"+d).remove()};var G=function(b){if(a.browser.msie)a("span#editmode").html(" D&eacute;sol&eacute;, <strong>Internet Explorer</strong> n'est pas support&eacute; :-( ! | ");else b?a("span#editmode").html('<a href="javascript:void(0);" onclick="$H.editSites();" title="Editer les liens de cette page (Connexion avec Facebook, pour sauvegarder)">Editer</a> | '):a("span#editmode").html('<a href="javascript:void(0);" onclick="$E.quitEditMode();" title="Effacer les modifications sans enregistrer">Quitter mode &eacute;dition</a> | ')}; c.toggleStock=function(){if(t=a.cookie("toStock")=="no"?true:false){A();a("div#searhTerms").show()}else{a.cookie("search","",{expires:365,path:"/"});a("div#searhTerms").hide()}a.cookie("toStock",t?"yes":"no",{expires:365,path:"/"});a("a#toggleStock").html(t?"Effacer":"Sauver")};c.toggleFoxy=function(){if(o=!o){l.show();a(document).trigger("mousemove")}else l.hide();a.cookie("foxy",o?"yes":"no",{expires:365,path:"/"});a("a#toggleStock").html(o?"Masquer":"Afficher")};var H=function(){var b=document.location.hash|| "home";a("div#menu a").removeClass("bold");a("div#menu a#"+b).addClass("bold")},U=function(b){b=b||5E3;a("<div />").attr({id:"overlay"}).css({top:0,left:0,width:n+"px",height:p+"px"}).appendTo("body").delay(b).fadeOut(400,function(){a(this).remove()})},V=function(){var b=new Date;a("span#heure").html(pad(b.getHours())+":"+pad(b.getMinutes())+":"+pad(b.getSeconds()))},I=function(){g.toggleClass("classQfocus",true);z="input"},J=function(){g.focus()},K=function(){g.toggleClass("classQfocus",false);z= "page"},L=function(){g.val()==""&&g.blur()},M=function(){},N=function(){if(g.val()!=""&&a(this).attr("rel")&&a(this).attr("rel").indexOf("{R}")!=-1){var b=g.val();F(b);b=escapeURI(b);return!window.open(a(this).attr("rel").replace(/{R}/g,b))}return true},O=function(){if(!E){E=true;g.autocomplete({suggestUrl:c.WWW+"_google_suggest.php",seedsUrl:c.WWW+"_veryrelated.php",minChars:1,delimiter:/(,|\+|-|AND)\s*/,autoSubmit:false,maxHeight:600,deferRequestBy:0})}if(g.val()==""&&s)s=false;if(!s)if(g.val()!= ""){s=true;m.each(function(){a(this).attr("rel")||a(this).fadeTo("slow",0.2)})}else m.each(function(){a(this).attr("rel")||a(this).fadeTo("slow",1)})},P=function(b){var d=b.which||b.keyCode;if(d==27){a("div#info,div#prefs").hide();a("div#divEdit").is(":visible")&&a("div#divEdit").dialog("close")}if(z=="input"&&g.val().length>=1)m.each(function(){a(this).attr("class","l")});else event2key[d]&&m.each(function(){event2key[d]!=""&&a(this).text().charAt(0).toLowerCase()==event2key[d]?a(this).attr("class", "l hightlight"):a(this).attr("class","l")})},W=function(b){!a(b.target).is("a#preferences")&&!a(this).parents().is("div#prefs")&&a("div#prefs").hide();!a(b.target).is("a#aide")&&!a(this).parents().is("div#info")&&a("div#info").hide()},R=function(){m.unbind("click",N).unbind("mouseenter",L).unbind("mouseleave",M);g.unbind("keyup",O).unbind("mouseenter",J).unbind("focus",I).unbind("blur",K);a("select#searcher").unbind("change",Q);a(document).unbind("keypress",P);a().keynavReset()},X=function(){var b= getUrlVars().searcher;if(b&&/(home\.b2bweb\.fr)/.test(b))window.document.location.href="http://fr.wiktionary.org/wiki/".escape(getUrlVars().q);a("select#searcher")[0].selectedIndex=0;g.attr({autocomplete:"off"});a("form#f").bind("submit",function(){var d=g.val();F(d)})},Q=function(){a("form#f").attr("action","http://www.google.fr/search");var b=a("input#searcher option:selected").val();if(b=="")g.val("");else{if(b.indexOf("|")>=0){b=b.split("|");a("form#f").attr("action",b[0]);b=b[1]}if(!v&&g.val()!= ""&&(b=="{mot}"||b=="{tag}")){g.selectRange(0,g.val().length+1);v=false}else{g.val(b);g.selectRange(b.indexOf("{"),b.indexOf("}")+1);v=true}}},Y=function(b){if(u){u=false;g.focus();if(o=="1")l.animate({top:0,left:b.pageX-120,opacity:1},1E3,function(){C=setInterval(function(){w+=0.06;y=0.4+Math.abs(Math.cos(w)*0.6);D=-x+Math.abs(Math.cos(w)*x);l.css({top:D+"px",opacity:y});a("div#footerBg").css({opacity:y});if(q>=222){clearInterval(C);l.stop(true,true);l.animate({top:"-"+l.height()+"px",opacity:0}, function(){u=true;q=0});a("div#footerBg").css({opacity:0.8})}else if(q%parseInt(Math.random()*20)==0)x=Math.abs(Math.cos(q/100))*10;q++},50)});else{l.hide();l.css({top:0})}}else if(o&&!l.is(":animated")){b=(b.pageX||360)-120;var d=a(window).width()/2-120;if(b<d){b+=d;if(b>a(window).width()-250)b=a(window).width()-240}else{b-=d;if(b<0)b=0}l.animate({left:b},{duration:1400,easing:"easeInQuad"});q=0}};c.setUlCol=function(b){var d=a("#SearchBot").width(),h=SITES.length,i=Math.floor(h/2),k=Math.floor(d/ i);d=Math.floor(d/(h-i));a("ul#L1 ul.sortUlLink").css({width:k+"px"});a("ul#L1 ul.sortUlLink li").css({width:k+"px"});a("ul#L2 ul.sortUlLink").css({width:d+"px"});a("ul#L2 ul.sortUlLink li").css({width:d+"px"});var j=a("ul#L1").height();a("ul#L1 li ul.sortUlLink").each(function(){if(b){var B=j-a(this).height();a(this).find("li:first").css({margin:B+"px 0 0 0"})}else a(this).find("li:first").css({margin:"0"})})};c.posItem=function(){f=a(window).height();e=a(window).width();var b=a("div#SearchBot").height(), d=a("div#SearchBot").width();a("body").css({overflow:f<b||e<d?"auto":"hidden"});a("div#SearchBot").center();a("div#prefs").center();a("div#info").center()};c.editSites=function(b){b&&b.preventDefault();G(false);R();if(typeof $E=="undefined"){loadCss(c.WWW+"css/start/jquery-ui-1.8.custom.css");getScript(c.WWW+"js/jquery-ui-1.8.sortableDialog.min.js");getScript(c.WWW+"js/jquery.edit.js",function(){$E.startEditMode()})}else $E.startEditMode();return false};c.setDatas=function(b){R();var d="js/sitesDatas.js.php"; switch(b){case "code":d="js/sitesDatas-code.js";break;case "twitter":d="js/sitesDatas-twitter.js"}getScript(c.WWW+d,function(){S();c.initSites()});document.location.hash=b||"";H();return false};var S=function(){var b=SITES.length,d=Math.floor(b/2),h="",i="",k="",j;for(j in SITES){h='<li class="sortLinkCat"><h3>'+SITES[j].title+"</h3></li>";k="";for(var B in SITES[j].data){var r=SITES[j].data[B];if(r.href&&r.title)k+='<li class="sortLink"><a href="'+r.href+'" rel="'+(r.result||"")+'" title="'+(r.tips|| "")+'" class="l" tabindex="'+T++ +'">'+r.title+"</a></li>"}i+=parseInt(j)+1<=d?'<li><ul class="sortUlLink">'+k+h+"</ul></li>":'<li><ul class="sortUlLink">'+h+k+"</ul></li>";if(parseInt(j)+1==d){a("#D1").html('<ul id="L1" class="sortUlCat">'+i+"</ul>");i=""}else parseInt(j)+1==b&&a("#D2").html('<ul id="L2" class="sortUlCat">'+i+"</ul>")}m=a("a.l")};c.initSites=function(){G(true);c.setUlCol(true);c.posItem();m.eq(Math.round(Math.random()*m.length)).addClass("hightlight2");m.bind("click",N).bind("mouseenter", L).bind("mouseleave",M);g.bind("keyup",O).bind("mouseenter",J).bind("focus",I).bind("blur",K);a("select#searcher").bind("change",Q);a(document).bind("keypress",P);a("div#SearchBot a.l").keynav()};a(document).ready(function(){g=a("input#q");m=a("a.l");l=a("div#foxy");e=a(window).width();f=a(window).height();n=a(document).width();p=a(document).height();U(500);a("div#SearchBot").show();a("a.css").styleInit();H();X();if(a.cookie("foxy"))o=a.cookie("foxy")=="yes"?true:false;a(document).mousemove(Y);a(document).bind("click", W);a(window).bind("resize",c.posItem);switch(document.location.hash){case "#code":c.setDatas("code");break;case "#twitter":c.setDatas("twitter");break;default:S();document.location.hash=="#editmode"?c.editSites():c.initSites()}setInterval(V,1E3);A()})})(jQuery,$H);