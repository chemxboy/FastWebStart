/*///////////////////////////////////////////////////////////////////////////////////////////////////////
///// Code mixing by Molokoloco ..... 2010 ......... [EVER IN PROGRESS (it's not done yet)]  ///////////
////  SOURCE here : http://home.b2bweb.fr/js/jquery.mlklc.js                                ///////////
////  My WIKI here : http://code.google.com/p/molokoloco-coding-project/wiki/WikiMenu      /////////// 
////////////////////////////////////////////////////////////////////////////////////////////////// */
var db=function(){"console"in window&&console.log.call(console,arguments)},die=function(a){throw a?a:"Oh my god moonWalker is down...";},trim=function(a){return a.replace(/^\s+|\s+$/g,"")},escapeURI=function(a){return encodeURIComponent?encodeURIComponent(a):encodeURI?encodeURI(a):escape?escape(a):a},event2key={"97":"a","98":"b","99":"c","100":"d","101":"e","102":"f","103":"g","104":"h","105":"i","106":"j","107":"k","108":"l","109":"m","110":"n","111":"o","112":"p","113":"q","114":"r","115":"s","116":"t", "117":"u","118":"v","119":"w","120":"x","121":"y","122":"z"},pad=function(a){return a<10?"0"+a:a},addslashes=function(a){return(a+"").replace(/([\\"'])/g,"\\$1").replace(/\u0000/g,"\\0")},getUrlVars=function(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,d,c){a[d]=c});return a},objSortByTitle=function(a,b){var d=a.title.toLowerCase(),c=b.title.toLowerCase();return d<c?-1:d>c?1:0},loadJs=function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript"); b.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(b)},loadCss=function(a){$("head").append('<link rel="stylesheet" type="text/css" href="'+a+'"/>')},getScript=function(a,b){$.ajax({dataType:"script",async:false,cache:true,url:a,success:function(){b&&typeof b=="function"&&b()}})},yTics=function(){try{_gat._getTracker("UA-1944677-8")._trackPageview()}catch(a){}},uservoiceOptions={key:"b2bweb",host:"b2bweb.uservoice.com",forum:"35888",showTab:true,alignment:"right",background_color:"#1395B8", text_color:"white",hover_color:"#41608F",lang:"fr"}; (function(a){a.extend(jQuery.easing,{easeInOutCirc:function(b,d,c,f,e){if((d/=e/2)<1)return-f/2*(Math.sqrt(1-d*d)-1)+c;return f/2*(Math.sqrt(1-(d-=2)*d)+1)+c},easeInQuad:function(b,d,c,f,e){return f*(d/=e)*d+c}});a.fn.extend({selectRange:function(b,d){var c=document.getElementById(a(this).attr("id"));if(c)if(c.setSelectionRange){c.focus();c.setSelectionRange(b,d)}else if(c.createTextRange){c=c.createTextRange();c.collapse(true);c.moveEnd("character",d);c.moveStart("character",b);c.select()}else if(c.selectionStart){c.selectionStart= b;c.selectionEnd=d}},center:function(){return this.each(function(){var b=(a(window).height()-a(this).outerHeight())/2,d=(a(window).width()-a(this).outerWidth())/2;a(this).css({position:"absolute",margin:0,top:(b>20?b:20)+"px",left:(d>0?d:0)+"px"})})},styleSwitch:function(b){var d=false,c=[];a("link[@rel*=style][id]").each(function(){if(b==a(this).attr("href")){a(this).removeAttr("disabled");d=true}else c.push(this)});d==false&&a("head").append('<link rel="stylesheet" type="text/css" href="'+b+'" id="theme'+ Math.random()+'"/>');setTimeout(function(){a(c).each(function(){a(this).attr("disabled","disabled")})},900);a.cookie("css",b,{expires:365,path:"/"})},styleInit:function(){if(a.cookie("css")){var b=false;a("link[rel*=style][id]").each(function(){if(a.cookie("css")==a(this).attr("href"))b=true});b==false&&a.fn.styleSwitch(a.cookie("css"))}return a(this).click(function(d){d.preventDefault();a.fn.styleSwitch(a(this).attr("rel"));a(this).blur()})}})})(jQuery); var HOME="http://home.b2bweb.fr/",foxAnim=true,startAnime=true,once=false,expressionFilled=false,intr=null,coef=0,dist=0,count=0,o=0,y=0,one=0,target="input",isAutocomplete=false,buildSites=function(){var a=SITES.length,b=Math.floor(a/2),d="",c="",f="",e;for(e in SITES){d='<li class="sortLinkCat"><h3>'+SITES[e].title+"</h3></li>";f="";for(var h in SITES[e].data){var g=SITES[e].data[h];if(g.href&&g.title)f+='<li class="sortLink"><a href="'+g.href+'" rel="'+(g.result||"")+'" title="'+(g.tips||"")+'" class="l">'+ g.title+"</a></li>"}c+=parseInt(e)+1<=b?'<li><ul class="sortUlLink">'+f+d+"</ul></li>":'<li><ul class="sortUlLink">'+d+f+"</ul></li>";if(parseInt(e)+1==b){$("#D1").html('<ul id="L1" class="sortUlCat">'+c+"</ul>");c=""}else parseInt(e)+1==a&&$("#D2").html('<ul id="L2" class="sortUlCat">'+c+"</ul>")}},initSites=function(){editButton(true);setUlCol(true);posItem();rdmSites();initSitesLinkDefaultEvent()},editSites=function(a){a&&a.preventDefault();editButton(false);removeSitesLinkDefaultEvent();if(typeof startEditMode!= "function"){loadCss("css/start/jquery-ui-1.8.custom.css");getScript(HOME+"js/jquery-ui-1.8.sortableDialog.min.js");getScript(HOME+"js/jquery.edit.js",function(){startEditMode()})}else startEditMode();return false},highlightMenu=function(){var a=document.location.hash||"home";$("div#menu a").removeClass("bold");$("div#menu a#"+a).addClass("bold")},setDatas=function(a){var b="js/sitesDatas.js.php";switch(a){case "code":b="js/sitesDatas-code.js";break;case "twitter":b="js/sitesDatas-twitter.js"}getScript(HOME+ b,function(){buildSites();initSites()});document.location.hash=a||"";highlightMenu();return false},setUlCol=function(a){var b=$("#SearchBot").width(),d=SITES.length,c=Math.floor(d/2),f=Math.floor(b/c);b=Math.floor(b/(d-c));$("ul#L1 ul.sortUlLink").css({width:f+"px"});$("ul#L1 ul.sortUlLink li").css({width:f+"px"});$("ul#L2 ul.sortUlLink").css({width:b+"px"});$("ul#L2 ul.sortUlLink li").css({width:b+"px"});var e=$("ul#L1").height();$("ul#L1 li ul.sortUlLink").each(function(){if(a){var h=e-$(this).height(); $(this).find("li:first").css({margin:h+"px 0 0 0"})}else $(this).find("li:first").css({margin:"0"})})},posItem=function(){var a=$(window).height(),b=$(window).width(),d=$("div#SearchBot").height(),c=$("div#SearchBot").width();a<d||b<c?$("body").css({overflow:"auto"}):$("body").css({overflow:"hidden"});$("div#SearchBot").center();$("div#prefs").center();$("div#info").center()},searchInit=function(){var a=getUrlVars().searcher;if(a&&/(home\.b2bweb\.fr)/.test(a))window.document.location.href="http://fr.wiktionary.org/wiki/".escape(getUrlVars().q); $("select#searcher")[0].selectedIndex=0;$("input#q").attr({autocomplete:"off"});$("input#q").focus(function(){$(this).css({"background-color":"#FFFFFF"})}).blur(function(){$(this).css({"background-color":"#F9F9F9"})})},rdmSites=function(){var a=Math.round(Math.random()*$("a.l").length);$("a.l").eq(a).addClass("hightlight2")},editButton=function(a){if($.browser.msie)$("span#editmode").html("Nous avons d\u00e9tect\u00e9 que vous utilisez Internet Explorer :-( | ");else a?$("span#editmode").html('<a href="javascript:void(0);" onclick="editSites();" title="Editer les liens de cette page (Connexion avec Facebook, pour sauvegarder)">Editer</a> | '): $("span#editmode").html('<a href="javascript:void(0);" onclick="quitEditMode();" title="Revenir sur la page normale">Quitter mode &eacute;dition</a> | ')},removeSitesLinkDefaultEvent=function(){$("a.l").unbind("click",autoFill);$("input#q").unbind("keyup",letterHide);$("select#searcher").unbind("change",searchBot);$(document).unbind("keypress",highLight)},initSitesLinkDefaultEvent=function(){$("a.l").live("click",autoFill);$("input#q").bind("keyup",letterHide);$("select#searcher").bind("change",searchBot); $(document).bind("keypress",highLight)},focusSearch=function(a){if(startAnime){startAnime=false;$("input#q").focus();if(foxAnim=="1")$("div#foxy").animate({top:0,left:a.pageX-120,opacity:1},1E3,function(){intr=setInterval(function(){coef+=0.06;o=0.4+Math.abs(Math.cos(coef)*0.6);y=-dist+Math.abs(Math.cos(coef)*dist);$("div#foxy").css({top:y+"px",opacity:o});$("div#footerBg").css({opacity:o});if(count>=222){clearInterval(intr);$("div#foxy").stop(true,true);$("div#foxy").animate({top:"-"+$("div#foxy").height()+ "px",opacity:0},function(){startAnime=true;count=0});$("div#footerBg").css({opacity:0.8})}else if(count%parseInt(Math.random()*20)==0)dist=Math.abs(Math.cos(count/100))*10;count++},50)});else{$("div#foxy").hide();$("div#foxy").css({top:0})}}else if(foxAnim&&!$("div#foxy").is(":animated")){a=(a.pageX||360)-120;var b=$(window).width()/2-120;if(a<b){a+=b;if(a>$(window).width()-250)a=$(window).width()-240}else{a-=b;if(a<0)a=0}$("div#foxy").animate({left:a},{duration:1400,easing:"easeInQuad"});count=0}}, toggleFoxy=function(){if(foxAnim=!foxAnim){$("div#foxy").show();$(document).trigger("mousemove")}else $("div#foxy").hide();$.cookie("foxy",foxAnim?"yes":"no",{expires:365,path:"/"})},highLight=function(a){if(target=="input"&&$("input#q").val().length>=1&&one==0){one=1;$(".l").each(function(){$(this).attr("class","l")})}else if(target=="input"&&$("input#q").val().length<1&&one==1)one=0;one==0&&$(".l").each(function(){event2key[a.which]!=""&&$(this).text().charAt(0).toLowerCase()==event2key[a.which]? $(this).attr("class","l hightlight"):$(this).attr("class","l")});if(a.keyCode==27){$("div#info,div#prefs").hide();$("div#divEdit").is(":visible")&&$("div#divEdit").dialog("close")}},docClick=function(a){!$(a.target).is("a#preferences")&&!$(this).parents().is("div#prefs")&&$("div#prefs").hide();!$(a.target).is("a#aide")&&!$(this).parents().is("div#info")&&$("div#info").hide()},autoFill=function(){target="page";one=0;$(this).blur();if($("input#q").val()!=""&&$(this).attr("rel")&&$(this).attr("rel").indexOf("{R}")!= -1)return!window.open($(this).attr("rel").replace(/{R}/g,escapeURI($("input#q").val())))},initAutocomplete=function(){isAutocomplete=true;$("input#q").autocomplete({suggestUrl:HOME+"_google_suggest.php",seedsUrl:HOME+"_veryrelated.php",minChars:1,delimiter:/(,|\+|-|AND)\s*/,autoSubmit:false,maxHeight:600,deferRequestBy:0})},letterHide=function(){isAutocomplete||initAutocomplete();target="input";if($("input#q").val()==""&&once)once=false;if(!once)if($("input#q").val()!=""){once=true;$(".l").each(function(){$(this).attr("rel")|| $(this).fadeTo("slow",0.2)})}else $(".l").each(function(){$(this).attr("rel")||$(this).fadeTo("slow",1)})},searchBot=function(){$("form#f").attr("action","http://www.google.fr/search");var a=$("#searcher option:selected").val();if(a=="")$("input#q").val("");else{if(a.indexOf("|")>=0){a=a.split("|");$("form#f").attr("action",a[0]);a=a[1]}if(!expressionFilled&&$("input#q").val()!=""&&(a=="{mot}"||a=="{tag}")){$("input#q").selectRange(0,$("input#q").val().length+1);expressionFilled=false}else{$("input#q").val(a); $("input#q").selectRange(a.indexOf("{"),a.indexOf("}")+1);expressionFilled=true}}},createAccount=function(){},timer=function(){setInterval(function(){var a=new Date;$("span#heure").html(pad(a.getHours())+":"+pad(a.getMinutes())+":"+pad(a.getSeconds()))},1E3)}; $(document).ready(function(){$("a.css").styleInit();highlightMenu();searchInit();if($.cookie("foxy"))foxAnim=$.cookie("foxy")=="yes"?true:false;$(document).mousemove(focusSearch);$(document).bind("click",docClick);$(window).bind("resize",posItem);switch(document.location.hash){case "#code":setDatas("code");break;case "#twitter":setDatas("twitter");break;default:buildSites();document.location.hash=="#editmode"?editSites():initSites()}timer()});