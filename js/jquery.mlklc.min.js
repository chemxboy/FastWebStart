/*///////////////////////////////////////////////////////////////////////////////////////////////////////
///// Code mixing by Molokoloco ..... 2010 ......... [EVER IN PROGRESS (it's not done yet)]  ///////////
////  SOURCES here : https://github.com/molokoloco/FastWebStart/                            ///////////
////  My WIKI here : http://code.google.com/p/molokoloco-coding-project/wiki/WikiMenu      /////////// 
////////////////////////////////////////////////////////////////////////////////////////////////// */
$(function(){$.extend(jQuery.easing,{easeInOutCirc:function(a,d,c,e,f){if((d/=f/2)<1)return-e/2*(Math.sqrt(1-d*d)-1)+c;return e/2*(Math.sqrt(1-(d-=2)*d)+1)+c},easeInQuad:function(a,d,c,e,f){return e*(d/=f)*d+c}});$.fn.extend({selectRange:function(a,d){var c=document.getElementById($(this).attr("id"));if(c)if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,d);else if(c.createTextRange)c=c.createTextRange(),c.collapse(!0),c.moveEnd("character",d),c.moveStart("character",a),c.select();else if(c.selectionStart)c.selectionStart= a,c.selectionEnd=d},center:function(){return this.each(function(){var a=($(window).height()-$(this).outerHeight())/2,d=($(window).width()-$(this).outerWidth())/2;$(this).css({position:"absolute",margin:0,top:(a>20?a:20)+"px",left:(d>0?d:0)+"px"})})},styleSwitch:function(a){var d=!1,c=[];$("link[@rel*=style][id]").each(function(){a==$(this).attr("href")?($(this).removeAttr("disabled"),d=!0):c.push(this)});d===!1&&$("head").append('<link rel="stylesheet" type="text/css" href="'+a+'" id="theme'+Math.random()+ '"/>');setTimeout(function(){$(c).each(function(){$(this).attr("disabled","disabled")})},900);$.cookie&&$.cookie("css",a,cookieOptions)},styleInit:function(){if($.cookie&&$.cookie("css")){var a=!1;$("link[rel*=style][id]").each(function(){$.cookie("css")==$(this).attr("href")&&(a=!0)});a===!1&&$.fn.styleSwitch($.cookie("css"))}return $(this).click(function(a){a.preventDefault();$.fn.styleSwitch($(this).attr("rel"));$(this).blur()})}})}); var db=function(){"console"in window&&console.log.call(console,arguments)},trim=function(a){return a.replace(/^\s+|\s+$/g,"")},escapeURI=function(a){return encodeURIComponent(a)||encodeURI(a)||escape(a)||a},event2key={"97":"a","98":"b","99":"c","100":"d","101":"e","102":"f","103":"g","104":"h","105":"i","106":"j","107":"k","108":"l","109":"m","110":"n","111":"o","112":"p","113":"q","114":"r","115":"s","116":"t","117":"u","118":"v","119":"w","120":"x","121":"y","122":"z"},pad=function(a){return a< 10?"0"+a:a},addslashes=function(a){return(a+"").replace(/\'/g,"\\'").replace(/"/g,"&quot;").replace(/\u0000/g,"\\0")},html2input=function(a){return unescape(a+"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},input2html=function(a){return(a+"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},_vars={},getUrlVars=function(){if(_vars.length>0)return _vars;window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,d,c){_vars[d]=c});return _vars},objSortByTitle= function(a,d){var c=a.title.toLowerCase(),e=d.title.toLowerCase();return c<e?-1:c>e?1:0},loadJs=function(a){var d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(d)},loadCss=function(a){$("head").append('<link rel="stylesheet" type="text/css" href="'+a+'"/>')},getScript=function(a,d){$.ajax({dataType:"script",async:!1,cache:!0,url:a,success:function(){d&&typeof d=="function"&&d()}})},$H={}; $H.WWW=/localhost\//.test(document.location)?"http://localhost/www.b2bweb.fr/home/":"http://home.b2bweb.fr/"; $(function(){var a=null,d=null,c=null,e=null,f=$.cookie("isAnonymous")==="no"?!1:!0;maxSearchLength=250;cookieOptions={expires:360,path:"/"};var j=800,n=600,x=800,y=600,h=!0,o=!0,z=null,p=0,q=0,g=0,r=0,A=0,s=!0,k=!1,t=!1,u="page",v=!1,B=!1,Q=3,w=function(b){if($.cookie("searchHistory")!="no"){var d=null,c="",m="";(d=$.cookie("search"))&&$.each(d.split("##"),function(b,a){a!=""&&(m=html2input(a),c+='<span id="term_'+b+'"><a href="javascript:void(0)" onclick="$(\'input#q\').val(\''+addslashes(m)+'\').select();" class="lien2" title="Ajouter">'+ m+'</a><a href="javascript:void(0)" onclick="$H.cookieDeleteTerm(\''+a+"', '"+b+'\');" title="Effacer">&#10006;</a>, </span>')});c!=""&&($("div#searhTerms").html(c.substr(0,c.length-9)),b&&a.val()==""&&$.cookie("emptySearch")!="yes"&&(a.val(input2html(m)).select(),v=!0))}},C=function(b){if($.cookie("searchHistory")!="no")if(b){$.cookie("emptySearch","no",cookieOptions);var a=null,d=!1,c=[],e=b.length;b=escape(b);(a=$.cookie("search"))&&$.each(a.split("##"),function(a,l){l==b?d=!0:e+=unescape(l).length; l!=""&&e<maxSearchLength&&c.push(l)});d||(c.push(b),$.cookie("search",c.join("##"),cookieOptions),w())}else $.cookie("emptySearch","yes",cookieOptions)};$H.cookieDeleteTerm=function(b,a){var c=null,d=[];if(c=$.cookie("search"))$.each(c.split("##"),function(a,c){c!=""&&c!=b&&d.push(c)}),$.cookie("search",d.join("##"),cookieOptions);$("span#term_"+a).remove()};var D=function(){return document.location.hash.replace(/^#/,"")||$.cookie("hash")||"home"},R=function(b){window.location.replace($H.WWW+"#"+ b);$.cookie("hash",b,cookieOptions)},E=function(b){$.browser.msie?$("span#editmode").html(" D&eacute;sol&eacute;, <strong>Internet Explorer</strong> n'est pas support&eacute; :-( ! | "):b?$("span#editmode").html('<a href="javascript:void(0);" onclick="$H.editSites();" title="Editer les liens de cette page (Connexion avec Facebook, pour sauvegarder)">Editer</a> | '):$("span#editmode").html('<a href="javascript:void(0);" onclick="$E.quitEditMode();" title="Effacer les modifications sans enregistrer">Quitter mode &eacute;dition</a> | ')}; $H.toggleCookiesTerms=function(){(s=$.cookie("searchHistory")=="no"?!0:!1)?(w(),$("div#searhTerms").show()):($.cookie("search","",cookieOptions),$("div#searhTerms").hide());$.cookie("searchHistory",s?"yes":"no",cookieOptions);$("a#toggleCookiesTerms").html(s?"Effacer":"Sauver")};$H.toggleFoxy=function(){(h=!h)?(c.show(),$(document).trigger("mousemove")):c.hide();$.cookie("foxy",h?"yes":"no",cookieOptions);$("a#toggleCookiesTerms").html(h?"Masquer":"Afficher")};var F=function(){var b=D();$("div#menu a").removeClass("bold"); $("div#menu a#"+b).addClass("bold")},S=function(b){$("<div />").attr({id:"overlay"}).css({top:0,left:0,width:x+"px",height:y+"px"}).appendTo("body").delay(b||5E3).fadeOut(400,function(){$(this).remove()})},T=function(){var b=new Date;$("span#heure").html(pad(b.getHours())+":"+pad(b.getMinutes())+":"+pad(b.getSeconds()))},G=function(){a.toggleClass("classQfocus",!0);u="input"},H=function(){a.focus()},I=function(){a.toggleClass("classQfocus",!1);u="page"},J=function(){if(a.val()){if(!v){var b=a.val().length; a.selectRange(b,b)}}else a.blur()},K=function(){},L=function(){var b=a.val(),c=$(this).attr("rel");C(b);if(b!=""&&c!=""&&c.indexOf("{R}")!=-1)return!window.open($(this).attr("rel").replace(/{R}/g,escapeURI(b)));return!0},M=function(){B||(B=!0,a.autocomplete({suggestUrl:$H.WWW+"_google_suggest.php",seedsUrl:$H.WWW+"_veryrelated.php",minChars:1,delimiter:/(,|\+|-|AND)\s*/,autoSubmit:!1,maxHeight:600,deferRequestBy:0}));!k&&a.val()!=""?(k=!0,d.each(function(){$(this).attr("rel")==""&&$(this).fadeTo("slow", 0.2)})):k&&a.val()==""&&(k=!1,d.each(function(){$(this).attr("rel")==""&&$(this).fadeTo("slow",1)}));v=!1},N=function(b){var c=b.which||b.keyCode;c==27&&($("div#info,div#prefs").hide(),$("div#divEdit").is(":visible")&&$("div#divEdit").dialog("close"));u=="input"&&a.val().length>=1?d.each(function(){$(this).attr("class","l")}):event2key[c]&&d.each(function(){event2key[c]!=""&&$(this).text().charAt(0).toLowerCase()==event2key[c]?$(this).attr("class","l hightlight"):$(this).attr("class","l")})},U=function(b){!$(b.target).is("a#preferences")&& !$(this).parents().is("div#prefs")&&$("div#prefs").hide();!$(b.target).is("a#aide")&&!$(this).parents().is("div#info")&&$("div#info").hide()},V=function(b){if(o)o=!1,a.focus(),h=="1"?c.animate({top:0,left:b.pageX-120,opacity:1},1E3,function(){z=setInterval(function(){p+=0.06;r=0.4+Math.abs(Math.cos(p)*0.6);A=-q+Math.abs(Math.cos(p)*q);c.css({top:A+"px",opacity:r});$("div#footerBg").css({opacity:r});g>=222?(clearInterval(z),c.stop(!0,!0).animate({top:"-"+c.height()+"px",opacity:0},function(){o=!0; g=0}),$("div#footerBg").css({opacity:0.8})):g%parseInt(Math.random()*20)==0&&(q=Math.abs(Math.cos(g/100))*10);g++},50)}):(c.hide(),c.css({top:0}));else if(h&&!c.is(":animated")){b=(b.pageX||360)-120;var d=j/2-120;b<d?(b+=d,b>j-250&&(b=j-240)):(b-=d,b<0&&(b=0));c.animate({left:b},{duration:1400,easing:"easeInQuad"});g=0}},P=function(){d.unbind("click",L).unbind("mouseenter",J).unbind("mouseleave",K);a.unbind("keyup",M).unbind("mouseenter",H).unbind("focus",G).unbind("blur",I);$("select#searcher").unbind("change", O);$(document).unbind("keypress",N);$().keynavReset()},W=function(b){C(a.val());if($("form#f").attr("action")!="http://www.google.fr/search"&&/(home\.b2bweb\.fr)/.test("http://www.google.fr/search"))b.preventDeafult(),window.document.location.href="http://fr.wiktionary.org/wiki/".escapeURI(a.val())};$H.setFormAction=function(b){typeof b!=="boolean"&&(b=f);b=!b;$("form#f").attr("action",b?"http://google.b2bweb.fr/search":"http://www.google.fr/search");$("a#anonyme").text(b?"Recherche anonyme":"Recherche normale"); $.cookie("isAnonymous",b?"yes":"no",cookieOptions);f=b;return!1};var O=function(){$H.setFormAction(!f);var b=$("select#searcher option:selected").val();b!=""&&(b.indexOf("|")>=0&&(b=b.split("|"),$("form#f").attr("action",b[0]),b=b[1]),!t&&a.val()!=""&&(b=="{mot}"||b=="{tag}")?(a.selectRange(0,a.val().length+1),t=!1):(a.val(b),a.selectRange(b.indexOf("{"),b.indexOf("}")+1),t=!0))};$H.setUlColSize=function(b){var a=e.width(),c=SITES.length,d=Math.floor(c/2),f=Math.floor(a/d);a=Math.floor(a/(c-d));$("ul#L1 ul.sortUlLink,ul#L1 ul.sortUlLink li").css({width:f+ "px"});$("ul#L2 ul.sortUlLink,ul#L2 ul.sortUlLink li").css({width:a+"px"});var i=$("ul#L1").height();$("ul#L1 li ul.sortUlLink").each(function(){if(b){var a=i-$(this).height();$(this).find("li:first").css({margin:a+"px 0 0 0"})}else $(this).find("li:first").css({margin:"0"})})};$H.centerElements=function(){n=$(window).height();j=$(window).width();var b=e.height(),a=e.width();$("body").css({overflow:n<b||j<a?"auto":"hidden"});$("div#SearchBot,div#prefs,div#info").center()};$H.editSites=function(b){b&& b.preventDefault();E(!1);P();typeof $E=="undefined"?(loadCss($H.WWW+"css/start/jquery-ui-1.8.custom.css"),getScript($H.WWW+"js/jquery-ui-1.8.sortableDialog.min.js"),getScript($H.WWW+"js/jquery.edit.min.js",function(){$E.startEditMode()})):$E.startEditMode();return!1};$H.setDatas=function(b){P();var a="js/sitesDatas.js.php";switch(b){case "code":a="js/sitesDatas-code.js";break;case "twitter":a="js/sitesDatas-twitter.js";break;default:b="home"}getScript($H.WWW+a,function(){$H.buildSites();$H.initSites()}); R(b);F();return!1};$H.buildSites=function(){var a=SITES.length,c=Math.floor(a/2),e="",f="",h="",i;for(i in SITES){e='<li class="sortLinkCat"><h3>'+SITES[i].title+"</h3></li>";h="";for(var j in SITES[i].data){var g=SITES[i].data[j];g.href&&g.title&&(h+='<li class="sortLink"><a href="'+g.href+'" rel="'+(g.result||"")+'" title="'+(g.tips||"")+'" class="l" tabindex="'+Q++ +'">'+g.title+"</a></li>")}f+=parseInt(i)+1<=c?'<li><ul class="sortUlLink">'+h+e+"</ul></li>":'<li><ul class="sortUlLink">'+e+h+"</ul></li>"; parseInt(i)+1==c?($("#D1").html('<ul id="L1" class="sortUlCat">'+f+"</ul>"),f=""):parseInt(i)+1==a&&$("#D2").html('<ul id="L2" class="sortUlCat">'+f+"</ul>")}d=$("a.l")};$H.initSites=function(){E(!0);$H.setUlColSize(!0);$H.centerElements();d.eq(Math.round(Math.random()*d.length)).addClass("hightlight2");d.bind("click",L).bind("mouseenter",J).bind("mouseleave",K);a.bind("keyup",M).bind("mouseenter",H).bind("focus",G).bind("blur",I);$("select#searcher").bind("change",O);$(document).bind("keypress", N);$("div#SearchBot a.l").keynav()};$(document).ready(function(){j=$(window).width();n=$(window).height();x=$(document).width();y=$(document).height();S(500);a=$("input#q");d=$("a.l");c=$("div#foxy");e=$("div#SearchBot");$("a.css").styleInit();w(!0);F();$("select#searcher")[0].selectedIndex=0;a.attr({autocomplete:"off"});$("form#f").bind("submit",W);$H.setFormAction(!f);e.fadeIn(300);var b=D();switch(b){case "code":$H.setDatas("code");break;case "twitter":$H.setDatas("twitter");break;default:$H.buildSites(), b=="editmode"?$H.editSites():$H.initSites()}$.cookie("foxy")&&(h=$.cookie("foxy")=="yes"?!0:!1);$(document).bind("mousemove",V).bind("click",U);$(window).bind("resize",$H.centerElements);setInterval(T,1E3)})});